<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="css/style.css">
<title>NCMS - National COVID Management System</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    
    <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,700" rel="stylesheet">

    <link rel="stylesheet" href="css/open-iconic-bootstrap.min.css">
    <link rel="stylesheet" href="css/animate.css">
    
    <link rel="stylesheet" href="css/owl.carousel.min.css">
    <link rel="stylesheet" href="css/owl.theme.default.min.css">
    <link rel="stylesheet" href="css/magnific-popup.css">

    <link rel="stylesheet" href="css/aos.css">

    <link rel="stylesheet" href="css/ionicons.min.css">

    <link rel="stylesheet" href="css/bootstrap-datepicker.css">
    <link rel="stylesheet" href="css/jquery.timepicker.css">

    
    <link rel="stylesheet" href="css/flaticon.css">
    <link rel="stylesheet" href="css/icomoon.css">
    <link rel="stylesheet" href="css/style.css">

    <link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery-ui.css" rel="stylesheet" type="text/css" />
    
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.js" type="text/javascript"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js" type="text/javascript"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js" ></script>


</head>
<body>

<h2>Animated Modal with Header and Footer</h2>

<!-- Trigger/Open The Modal -->
<form  name="detail">
                  <div class="form-group">
                    <input type="text" class="form-control" name="id" id="id" placeholder="Your ID">
                  </div>
                  <div class="form-group">
                    <input id="myBtn" type="Login" value="Check" class="btn btn-primary">
                  </div>
              </form>


<!-- The Modal -->
<div id="myModal" class="modal2">

  <!-- Modal content -->
  <div class="modal2-content">
    <div class="modal2-header">
      <span class="close2">&times;</span>
      <h2>Modal Header</h2>
    </div>
    <div class="modal2-body" id ="asd">
      
    </div>
    <div class="modal2-footer">
      <h3>Modal Footer</h3>
    </div>
  </div>

</div>

<script>
// Get the modal
function addData(data) {
var modalPopup = document.getElementById("myModal");

// Get the button that opens the modal
var btn = document.getElementById("myBtn");

// Get the <span> element that closes the modal
var span = document.getElementsByClassName("close2")[0];

// When the user clicks the button, open the modal 
btn.onclick = function() {
  modalPopup.style.display = "block";
}

// When the user clicks on <span> (x), close the modal
span.onclick = function() {
  modalPopup.style.display = "none";
}

// When the user clicks anywhere outside of the modal, close it
window.onclick = function(event) {
  if (event.target == modalPopup) {
    modalPopup.style.display = "none";
  }
}
}

$(document).ready(function(){
                        $('#myBtn').click(function()
                        {   
                          var id=$('#id').val();
                            $.ajax({
                              type: "PUT",
                              url: 'http://localhost:8081/patientRegister?id='+id,
                              dataType: "json",
                              
                              success: function(data, status, xhr) {
                                console.log(data);
                                //alert(JSON.stringify(data));
                                
                                /*data.forEach(function(jsonData){
                                  str + = JSON.stringify(jsonData)
                                });
                                alert(str);
                                  /*$.each(data, function(key, obj) {
                                    console.log(key);
                                      let printStr = '<tr><td>' + obj.name + '</td><td>' + obj.statistics + '</td></tr>';
                                          $('#hospital-stats tr:last').after(printStr);
                                  });*/
                                  
                              },
                              error: function(jqXHR, textStatus, errorThrown){
                                  alert('Error: ' + textStatus + ' - ' + errorThrown);
                              }


                          });                               
                        });
                        $.getJSON('http://localhost:8081/patientRegister?id='+id, addData);
                    });
</script>

</body>
</html>
